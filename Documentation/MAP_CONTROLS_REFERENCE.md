# Map Controls - Visual Reference

## Control Panel Layout

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Map â€” Manuscript Production (fallback: Holding Institution)             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚ â˜‘ Clustering  â˜ Connection Lines  â˜ Heatmap  â˜ Show Routes  [Reset View]â”‚
â”‚                                                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚ Time Period: All dates                                        [Clear]   â”‚
â”‚ [800 |â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•| 1600]   â”‚
â”‚ [800 |â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•| 1600]   â”‚
â”‚                                                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚                          [MAP VISUALIZATION AREA]                        â”‚
â”‚                                                                          â”‚
â”‚        â€¢ â€¢ â€¢  (42)                                                       â”‚
â”‚                              â€¢                                           â”‚
â”‚                 (15)                                                     â”‚
â”‚            â€¢ â€¢ â€¢                      â€¢ â€¢                                â”‚
â”‚                                     â€¢   â€¢                                â”‚
â”‚                                                                          â”‚
â”‚    [Zoom Controls]                                                       â”‚
â”‚        [+]                                                               â”‚
â”‚        [-]                                                               â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Feature Toggle Controls (Top Bar)

### Visual States

#### Clustering (Default: ON)
```
â˜‘ Clustering  â†’  Markers group into clusters with counts
â˜ Clustering  â†’  Individual markers shown (can overlap)
```

#### Connection Lines (Default: OFF)
```
â˜ Connection Lines  â†’  No lines drawn
â˜‘ Connection Lines  â†’  Orange dashed lines: Production -----> Holding
```

#### Heatmap (Default: OFF)
```
â˜ Heatmap  â†’  No overlay
â˜‘ Heatmap  â†’  Color gradient overlay showing density
```

#### Show Routes (Default: OFF)
```
â˜ Show Routes  â†’  No route paths
â˜‘ Show Routes  â†’  Purple lines with numbered markers
```

#### Reset View Button
```
[Reset View]  â†’  Click to zoom/pan to fit all visible markers
```

---

## Time Filter Controls (Bottom Bar)

### Display

```
Time Period: 1200â€“1400                                          [Clear]
```

Shows current selected range. Updates in real-time as you drag sliders.

Possible states:
- `All dates` - When sliders are at 800 and 1600 (full range)
- `1200â€“1400` - When range is narrowed
- `1000â€“1050` - Any custom range

### Dual Sliders

```
Start Date:  [800 |â•â•â•â•â•â•â•â—â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•| 1600]
End Date:    [800 |â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â—â•â•â•â•â•â•â•â•â•â•| 1600]
```

#### Start Date Slider (Top)
- Drag to set earliest date to show
- Range: 800-1600
- Increments: 10 years
- Cannot exceed end date (auto-adjusts)

#### End Date Slider (Bottom)
- Drag to set latest date to show
- Range: 800-1600
- Increments: 10 years
- Cannot go below start date (auto-adjusts)

### Clear Button

```
[Clear]  â†’  Resets both sliders to 800 and 1600 (full range)
```

---

## Map Features Visual Examples

### 1. Markers Without Clustering

```
Simple circular markers:
   â—  Individual manuscript
   â—  Individual production unit
   â—  Individual institution

All markers visible, may overlap in dense areas
```

### 2. Markers With Clustering (Default)

```
Cluster (small group, 2-9):
   â”Œâ”€â”€â”€â”
   â”‚ 5 â”‚  â† Number of markers
   â””â”€â”€â”€â”˜

Cluster (medium group, 10-99):
   â”Œâ”€â”€â”€â”
   â”‚42 â”‚
   â””â”€â”€â”€â”˜

Cluster (large group, 100+):
   â”Œâ”€â”€â”€â”€â”
   â”‚156 â”‚
   â””â”€â”€â”€â”€â”˜

Individual marker (when zoomed in):
   â—
```

### 3. Connection Lines

```
Production Location          Holding Institution
       â—  - - - - - - - - - - - - >  â—
       
Orange dashed line (stroke-dasharray: 5,5)
Shows manuscript movement from creation to current location
Click line to see popup with details
```

### 4. Heatmap Overlay

```
Color Gradient (intensity):

ğŸ”µ Blue    = Low density (1-2 records)
ğŸŸ¢ Cyan    = Low-medium density
ğŸŸ¡ Lime    = Medium density
ğŸŸ  Yellow  = High density
ğŸ”´ Red     = Very high density (hotspot)

Example visualization:
             ğŸ”µ
         ğŸ”µ ğŸŸ¢ ğŸ”µ
        ğŸ”µ ğŸŸ¢ğŸŸ¡ğŸŸ¢ ğŸ”µ
           ğŸŸ¢ğŸŸ¡ğŸ”´ğŸŸ¡ğŸŸ¢
            ğŸŸ¡ğŸŸ¡ğŸŸ¡
             ğŸŸ¢

Larger, more intense spots = more records in that area
```

### 5. Route Visualization

```
Production â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•> Current Location
    â‘                                       â‘¡
    
Purple solid line (weight: 3)
Numbered purple circle markers at each stop
Shows manuscript journey/provenance path

Click route or markers for popup:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Manuscript Title         â”‚
â”‚ Route: Production â†’      â”‚
â”‚        Current Location  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Popup Windows

### Marker Popup (When clicking a point)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Florence, Biblioteca Laurenziana â”‚
â”‚ MS Plut. 1.1                     â”‚
â”‚                                  â”‚
â”‚        [Open in results]         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Connection Line Popup

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Paris, BnF fr. 580               â”‚
â”‚ Production â†’ Holding             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Route Popup (When clicking route line)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Admont, Stiftsbibliothek MS 58  â”‚
â”‚ Route: Production â†’              â”‚
â”‚        Current Location          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Route Marker Popup (When clicking numbered marker)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Production                       â”‚
â”‚ Step 1 of 2                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Interaction Examples

### Example 1: Enable All Features

```
Step 1: Current state (default)
â˜‘ Clustering  â˜ Connection Lines  â˜ Heatmap  â˜ Show Routes
Map shows: Clustered markers only

Step 2: Enable Connection Lines
â˜‘ Clustering  â˜‘ Connection Lines  â˜ Heatmap  â˜ Show Routes
Map shows: Clustered markers + Orange dashed lines

Step 3: Enable Heatmap
â˜‘ Clustering  â˜‘ Connection Lines  â˜‘ Heatmap  â˜ Show Routes
Map shows: Clustered markers + Orange lines + Color overlay

Step 4: Enable Routes
â˜‘ Clustering  â˜‘ Connection Lines  â˜‘ Heatmap  â˜‘ Show Routes
Map shows: All features combined (may be busy!)

Tip: Don't enable all at once - select features based on research question
```

### Example 2: Time Filter Workflow

```
Step 1: Default state
Time Period: All dates
[800 |â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•| 1600]
[800 |â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•| 1600]
Shows all records regardless of date

Step 2: Drag start slider to 1200
Time Period: 1200â€“1600
[800 |â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â—â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•| 1600]
[800 |â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•| 1600]
Shows only records from 1200 onwards

Step 3: Drag end slider to 1400
Time Period: 1200â€“1400
[800 |â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â—â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•| 1600]
[800 |â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â—â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•| 1600]
Shows only records from 1200-1400 (13th-14th century)

Step 4: Click [Clear]
Time Period: All dates
[800 |â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•| 1600]
[800 |â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•| 1600]
Back to all dates
```

### Example 3: Clustering Toggle

```
With Clustering (Dense City View):
Florence area:
     â”Œâ”€â”€â”€â”€â”
     â”‚ 58 â”‚  â† All Florence manuscripts in one cluster
     â””â”€â”€â”€â”€â”˜

Without Clustering (Dense City View):
Florence area:
   â— â— â— â— â—
   â— â— â— â— â—
   â— â— â— â— â—  â† 58 individual markers (overlapping!)
   â— â— â— â—

Recommendation: Keep clustering ON for dense cities
```

---

## Color Scheme Reference

### Markers
- **Default**: `#3388ff` (blue)
- **Fill Opacity**: 0.7
- **Border**: White, 1px

### Connection Lines
- **Color**: `#ff7800` (orange)
- **Weight**: 2px
- **Opacity**: 0.6
- **Style**: Dashed (5, 5)

### Routes
- **Color**: `#9333ea` (purple)
- **Weight**: 3px
- **Opacity**: 0.7
- **Style**: Solid

### Route Markers
- **Fill**: `#9333ea` (purple)
- **Border**: White, 2px
- **Radius**: 8px
- **Fill Opacity**: 0.8

### Heatmap Gradient
```
0.4 = blue    rgb(0, 0, 255)
0.6 = cyan    rgb(0, 255, 255)
0.7 = lime    rgb(0, 255, 0)
0.8 = yellow  rgb(255, 255, 0)
1.0 = red     rgb(255, 0, 0)
```

### Clusters
- **Small** (2-9): Green, 40px diameter
- **Medium** (10-99): Yellow, 50px diameter
- **Large** (100+): Red, 60px diameter

---

## Responsive Behavior

### Desktop (Recommended)
- All features work smoothly
- Precise slider control
- Hover states visible
- Full popup functionality

### Tablet
- Touch-friendly controls
- Sliders may be less precise
- Clustering recommended (harder to tap small markers)
- Pinch to zoom works

### Mobile
- Basic functionality
- Sliders harder to use (consider using keyboard input in future)
- Clustering essential (too hard to tap individual markers)
- May need to zoom more to see details

---

## Keyboard Shortcuts (Future Enhancement)

*Not yet implemented, but planned:*

- `C` - Toggle clustering
- `L` - Toggle connection lines
- `H` - Toggle heatmap
- `R` - Toggle routes
- `T` - Focus time slider
- `Esc` - Clear time filter
- `Space` - Reset view
- `+` / `-` - Zoom in/out

---

## Accessibility Notes

### Current Implementation
- âœ… Semantic HTML (checkboxes, labels)
- âœ… Keyboard accessible controls
- âœ… Clear visual feedback
- âœ… High contrast colors

### Future Improvements
- âš ï¸ Add ARIA labels to sliders
- âš ï¸ Add screen reader descriptions for map features
- âš ï¸ Keyboard navigation within map
- âš ï¸ Alternative text-based view option

---

**Document Version**: 1.0  
**Last Updated**: October 30, 2025  
**Purpose**: Visual reference for map control panel
